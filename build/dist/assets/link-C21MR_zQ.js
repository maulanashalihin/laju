import{T as M,B as O,a4 as F,a5 as w,r as p,a6 as q,a7 as k,a8 as x}from"./inertia-Cp4S03nP.js";function Q(r,a,c){M(()=>{var s=O(()=>a(r,c==null?void 0:c())||{});if(s!=null&&s.destroy)return()=>s.destroy()})}function z(r){return function(...a){var c=a[0];return c.stopPropagation(),r==null?void 0:r.apply(this,a)}}function G(r){return function(...a){var c=a[0];return c.preventDefault(),r==null?void 0:r.apply(this,a)}}function J(r,a={}){let c=0,s,u=[],D,A=[],h,f,P,y,d;const g={click:e=>{k(e)&&(e.preventDefault(),p.visit(f,d))}},b={mouseenter:()=>s=setTimeout(()=>v(),F.get("prefetch.hoverDelay")),mouseleave:()=>clearTimeout(s),click:g.click},m={mousedown:e=>{k(e)&&(e.preventDefault(),v())},keydown:e=>{x(e)&&(e.preventDefault(),v())},mouseup:e=>{e.preventDefault(),p.visit(f,d)},keyup:e=>{x(e)&&(e.preventDefault(),p.visit(f,d))},click:e=>{k(e)&&e.preventDefault()}};function S({cacheFor:e=0,prefetch:t=!1,cacheTags:l=[],viewTransition:B=!1,...o}){var T;u=t===!0?["hover"]:t===!1?[]:Array.isArray(t)?t:[t],D=e!==0?e:u.length===1&&u[0]==="click"?0:F.get("prefetch.cacheFor"),A=Array.isArray(l)?l:[l],h=w(o.href)?o.href.method:((T=o.method)==null?void 0:T.toLowerCase())||"get",[f,P]=N(h,o),r.tagName==="A"&&(r.href=f),y={data:P,method:h,replace:o.replace||!1,preserveScroll:o.preserveScroll||!1,preserveState:o.preserveState??h!=="get",preserveUrl:o.preserveUrl||!1,only:o.only||[],except:o.except||[],headers:o.headers||{},async:o.async||!1},d={...y,viewTransition:B,onStart:n=>(c++,C(),i("start",{detail:{visit:n}})),onProgress:n=>i("progress",{detail:{progress:n}}),onFinish:n=>(c--,C(),i("finish",{detail:{visit:n}})),onBefore:n=>i("before",{cancelable:!0,detail:{visit:n}}),onCancel:()=>i("cancel"),onSuccess:n=>i("success",{detail:{page:n}}),onError:n=>i("error",{detail:{errors:n}}),onCancelToken:n=>i("cancel-token",{detail:{token:n}}),onPrefetching:n=>i("prefetching",{detail:{visit:n}}),onPrefetched:(n,I)=>i("prefetched",{detail:{response:n,visit:I}})},U()}function i(e,t={}){return r.dispatchEvent(new CustomEvent(e,t))}function N(e,t){return q(e,w(t.href)?t.href.url:r.href||t.href||"",t.data||{},t.queryStringArrayFormat||"brackets")}function v(){p.prefetch(f,{...y,onPrefetching:e=>i("prefetching",{detail:{visit:e}}),onPrefetched:(e,t)=>i("prefetched",{detail:{response:e,visit:t}})},{cacheFor:D,cacheTags:A})}function C(){if(c>0){r.setAttribute("data-loading","");return}r.removeAttribute("data-loading")}function U(){if(L(),u.includes("hover")){E(b);return}if(u.includes("click")){E(m);return}E(g)}function E(e){Object.entries(e).forEach(([t,l])=>{r.addEventListener(t,l)})}function L(){[b,m,g].forEach(e=>{Object.entries(e).forEach(([t,l])=>{r.removeEventListener(t,l)})})}function j(){clearTimeout(s),L()}return S(a),u.includes("mount")&&v(),{update:S,destroy:j}}export{Q as a,J as l,G as p,z as s};
