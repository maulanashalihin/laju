import{T as M,B as O,a6 as F,a7 as w,r as v,a8 as q,a9 as k,aa as x}from"./inertia-BISNqjLw.js";function Q(c,p,a){M(()=>{var o=O(()=>p(c,a==null?void 0:a())||{});if(o!=null&&o.destroy)return()=>o.destroy()})}function z(c,p={}){let a=0,o,f=[],A,b=[],u,l,D,g,h;const y={click:e=>{k(e)&&(e.preventDefault(),v.visit(l,h))}},m={mouseenter:()=>o=setTimeout(()=>d(),F.get("prefetch.hoverDelay")),mouseleave:()=>clearTimeout(o),click:y.click},P={mousedown:e=>{k(e)&&(e.preventDefault(),d())},keydown:e=>{x(e)&&(e.preventDefault(),d())},mouseup:e=>{e.preventDefault(),v.visit(l,h)},keyup:e=>{x(e)&&(e.preventDefault(),v.visit(l,h))},click:e=>{k(e)&&e.preventDefault()}};function S({cacheFor:e=0,prefetch:t=!1,cacheTags:s=[],viewTransition:B=!1,...i}){var T;f=t===!0?["hover"]:t===!1?[]:Array.isArray(t)?t:[t],A=e!==0?e:f.length===1&&f[0]==="click"?0:F.get("prefetch.cacheFor"),b=Array.isArray(s)?s:[s],u=w(i.href)?i.href.method:((T=i.method)==null?void 0:T.toLowerCase())||"get",[l,D]=N(u,i),c.tagName==="A"&&(c.href=l),g={data:D,method:u,replace:i.replace||!1,preserveScroll:i.preserveScroll||!1,preserveState:i.preserveState??u!=="get",preserveUrl:i.preserveUrl||!1,only:i.only||[],except:i.except||[],headers:i.headers||{},async:i.async||!1},h={...g,viewTransition:B,onStart:r=>(a++,C(),n("start",{detail:{visit:r}})),onProgress:r=>n("progress",{detail:{progress:r}}),onFinish:r=>(a--,C(),n("finish",{detail:{visit:r}})),onBefore:r=>n("before",{cancelable:!0,detail:{visit:r}}),onCancel:()=>n("cancel"),onSuccess:r=>n("success",{detail:{page:r}}),onError:r=>n("error",{detail:{errors:r}}),onCancelToken:r=>n("cancel-token",{detail:{token:r}}),onPrefetching:r=>n("prefetching",{detail:{visit:r}}),onPrefetched:(r,I)=>n("prefetched",{detail:{response:r,visit:I}})},U()}function n(e,t={}){return c.dispatchEvent(new CustomEvent(e,t))}function N(e,t){return q(e,w(t.href)?t.href.url:c.href||t.href||"",t.data||{},t.queryStringArrayFormat||"brackets")}function d(){v.prefetch(l,{...g,onPrefetching:e=>n("prefetching",{detail:{visit:e}}),onPrefetched:(e,t)=>n("prefetched",{detail:{response:e,visit:t}})},{cacheFor:A,cacheTags:b})}function C(){if(a>0){c.setAttribute("data-loading","");return}c.removeAttribute("data-loading")}function U(){if(L(),f.includes("hover")){E(m);return}if(f.includes("click")){E(P);return}E(y)}function E(e){Object.entries(e).forEach(([t,s])=>{c.addEventListener(t,s)})}function L(){[m,P,y].forEach(e=>{Object.entries(e).forEach(([t,s])=>{c.removeEventListener(t,s)})})}function j(){clearTimeout(o),L()}return S(p),f.includes("mount")&&d(),{update:S,destroy:j}}export{Q as a,z as l};
